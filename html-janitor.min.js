!function(e,i){"function"==typeof define&&define.amd?define("html-janitor",i):"object"==typeof exports?module.exports=i():e.HTMLJanitor=i()}(this,function(){function e(e){this.config=e}function i(e){return-1!==n.indexOf(e.nodeName)}function t(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT)}var n=["P","LI","DIV"];return e.prototype.clean=function(e){var i=document.createElement("div");return i.innerHTML=e,this._sanitize(i),i.innerHTML},e.prototype._sanitize=function(e){var n=t(e),o=n.firstChild();if(o)do{var r=o.nodeName.toLowerCase(),a=this.config.tags[r];if(!o._sanitized)if(o.nodeType!==Node.TEXT_NODE){if(o.nodeType===Node.COMMENT_NODE){e.removeChild(o),this._sanitize(e);break}var d,s="b"===r;s&&(d=Array.prototype.some.call(o.childNodes,i));var l=s&&d,f=!!e.parentNode,m=i(e)&&i(o)&&f;if(!this.config.tags[r]||l||m){if("SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName)for(;o.childNodes.length>0;)e.insertBefore(o.childNodes[0],o);e.removeChild(o),this._sanitize(e);break}for(var c=0;c<o.attributes.length;c+=1){var u=o.attributes[c],h=u.name.toLowerCase(),N=a[h],v=!N,p=N!==!0&&u.value!==N;(v||p)&&(o.removeAttribute(u.name),c-=1)}this._sanitize(o),o._sanitized=!0}else if(""===o.data.trim()&&(o.previousElementSibling&&i(o.previousElementSibling)||o.nextElementSibling&&i(o.nextElementSibling))){e.removeChild(o),this._sanitize(e);break}}while(o=n.nextSibling())},e});
//# sourceMappingURL=html-janitor.min.js.map